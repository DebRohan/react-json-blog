{"ast":null,"code":"var _jsxFileName = \"/Users/debarishidevnath/blog react app/react-json-blog/src/pages/AddEditBlog.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\"; // import { MDBContainer, MDBTypography } from \"mdb-react-ui-kit\";\n\nimport { MDBValidation, MDBInput, MDBBtn } from \"mdb-react-ui-kit\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from 'axios';\nimport { toast } from \"react-toastify\"; //xqvmv0yi\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  likes: \"\",\n  comments: \"\",\n  authorname: \"\",\n  likes: \"\",\n  title: \"\",\n  description: \"\",\n  category: \"\",\n  imageUrl: \"\"\n};\nconst options = ['Travel', \"Fashion\", \"Fitness\", \"Sports\", \"Food\", \"Tech\"];\n\nconst AddEditBlog = () => {\n  _s();\n\n  const [formValue, setFormValue] = useState(initialState);\n  const [categoryErrMsg, setCategoryErrMsg] = useState(null);\n  const {\n    authorname,\n    title,\n    description,\n    likes,\n    comments,\n    category,\n    imageUrl\n  } = formValue;\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    if (id) {\n      setEditMode(true);\n      getSingleBlog(id);\n    } else {\n      setEditMode(false);\n      setFormValue({ ...initialState\n      });\n    }\n  }, [id]);\n\n  const getDate = () => {\n    let today = new Date();\n    let dd = String(today.getDate()).padStart(2, \"0\");\n    let mm = String(today.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n\n    let yyyy = today.getFullYear();\n    today = mm + \"/\" + dd + \"/\" + yyyy;\n    return today;\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (!category) {\n      setCategoryErrMsg(\"Please select a category\");\n    }\n\n    if (authorname && title && description && imageUrl && category && likes && comments) {\n      const currentDate = getDate();\n      const updatedBlogData = { ...formValue,\n        date: currentDate\n      };\n      const response = await axios.post(\"http://localhost:5000/blogs\", updatedBlogData);\n\n      if (response.status === 201) {\n        toast.success(\"Blog Created Successfully\");\n      } else {\n        toast.error(\"Something went wrong\");\n      }\n\n      setFormValue({\n        authorname: \"\",\n        title: \"\",\n        description: \"\",\n        likes: \"\",\n        comments: \"\",\n        category: \"\",\n        imageUrl: \"\"\n      });\n      navigate(\"/\");\n    }\n  };\n\n  const onInputChange = e => {\n    let {\n      name,\n      value\n    } = e.target;\n    setFormValue({ ...formValue,\n      [name]: value\n    });\n  };\n\n  const onUploadImage = file => {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append(\"upload_preset\", \"xqvmv0yi\");\n    axios.post(\"http://api.cloudinary.com/v1_1/ddy1g5aim/image/upload\", formData).then(resp => {\n      toast.info(\"Image Uploaded Successfully\");\n      setFormValue({ ...formValue,\n        imageUrl: resp.data.url\n      });\n    }).catch(err => {\n      toast.error(\"Something went wrong\");\n    });\n  };\n\n  const onCategoryChange = e => {\n    setCategoryErrMsg(null);\n    setFormValue({ ...formValue,\n      category: e.target.value\n    });\n  };\n\n  return (\n    /*#__PURE__*/\n    // <div style={{ marginTop: \"100px\" }}>\n    //   {/* <MDBContainer>\n    //     <MDBTypography note noteColor=\"primary\">\n    //       It is blogging website where you will find blog post related to\n    //       different category like Travel, Food, Sports Fitness, Tech and Fashion\n    //     </MDBTypography>\n    //   </MDBContainer> */}\n    //   <h2>Add Edit</h2>\n    // </div>\n    _jsxDEV(MDBValidation, {\n      className: \"row g-3\",\n      style: {\n        marginTop: '100px'\n      },\n      noValidate: true,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"fs-2 fw-bold\",\n        children: \"Add Blog\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: \"auto\",\n          padding: \"15px\",\n          maxWidth: \"400px\",\n          alignContent: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(MDBInput, {\n          value: authorname || \"\",\n          name: \"authorname\",\n          type: \"text\",\n          onChange: onInputChange,\n          required: true,\n          label: \"Author Name\",\n          validation: \"Please provide an Author Name\",\n          invalid: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n          value: title || \"\",\n          name: \"title\",\n          type: \"text\",\n          onChange: onInputChange,\n          required: true,\n          label: \"Title\",\n          validation: \"Please provide a title\",\n          invalid: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n          value: likes || \"\",\n          name: \"likes\",\n          type: \"text\",\n          onChange: onInputChange,\n          required: true,\n          label: \"Number of Likes\",\n          validation: \"Please Enter the number of likes\",\n          invalid: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n          value: comments || \"\",\n          name: \"comments\",\n          type: \"text\",\n          onChange: onInputChange,\n          required: true,\n          label: \"Comments\",\n          validation: \"Please Enter the number of comments recieved\",\n          invalid: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n          value: description || \"\",\n          name: \"description\",\n          type: \"text\",\n          onChange: onInputChange,\n          required: true,\n          label: \"Description\",\n          validation: \"Please provide a description\",\n          textarea: true,\n          rows: 4,\n          invalid: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n          type: \"file\",\n          onChange: e => onUploadImage(e.target.files[0]),\n          required: true,\n          validation: \"Please provide a title\",\n          invalid: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"categoryDropdown\",\n          onChange: onCategoryChange,\n          value: category,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Please select category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 11\n          }, this), options.map((option, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: option || \"\",\n            children: option\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 14\n        }, this), categoryErrMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"categoryErrorMsg\",\n          children: categoryErrMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n          type: \"submit\",\n          style: {\n            marginRight: \"10px\"\n          },\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n          color: \"danger\",\n          style: {\n            marginRight: \"10px\"\n          },\n          onClick: () => navigate(\"/\"),\n          children: \"Go Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }, this)\n  );\n};\n\n_s(AddEditBlog, \"AZBnzTj78Tjt15G6HQbcljztVU8=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = AddEditBlog;\nexport default AddEditBlog;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddEditBlog\");","map":{"version":3,"sources":["/Users/debarishidevnath/blog react app/react-json-blog/src/pages/AddEditBlog.js"],"names":["React","useState","MDBValidation","MDBInput","MDBBtn","useNavigate","useParams","axios","toast","initialState","likes","comments","authorname","title","description","category","imageUrl","options","AddEditBlog","formValue","setFormValue","categoryErrMsg","setCategoryErrMsg","navigate","id","useEffect","setEditMode","getSingleBlog","getDate","today","Date","dd","String","padStart","mm","getMonth","yyyy","getFullYear","handleSubmit","e","preventDefault","currentDate","updatedBlogData","date","response","post","status","success","error","onInputChange","name","value","target","onUploadImage","file","formData","FormData","append","then","resp","info","data","url","catch","err","onCategoryChange","marginTop","margin","padding","maxWidth","alignContent","files","map","option","index","marginRight"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\n// import { MDBContainer, MDBTypography } from \"mdb-react-ui-kit\";\nimport {MDBValidation, MDBInput, MDBBtn} from \"mdb-react-ui-kit\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from 'axios';\nimport {toast} from \"react-toastify\"\n\n//xqvmv0yi\n\nconst initialState = {\nlikes: \"\",\ncomments: \"\",\nauthorname: \"\",\nlikes: \"\",\ntitle: \"\",\ndescription: \"\",\ncategory: \"\",\nimageUrl: \"\"\n}\n\nconst options = ['Travel', \"Fashion\", \"Fitness\", \"Sports\", \"Food\", \"Tech\"]\nconst AddEditBlog = () => {\n    const [formValue, setFormValue] = useState(initialState);\n    const [categoryErrMsg, setCategoryErrMsg] = useState(null);\n    const {authorname, title, description, likes, comments, category, imageUrl} = formValue; \n\n    const navigate = useNavigate();\n\n    const { id } = useParams();\n\n  useEffect(() => {\n    if (id) {\n      setEditMode(true);\n      getSingleBlog(id);\n    } else {\n      setEditMode(false);\n      setFormValue({ ...initialState });\n    }\n  }, [id]);\n\n    \n    const getDate = () => {\n        let today = new Date();\n        let dd = String(today.getDate()).padStart(2, \"0\");\n        let mm = String(today.getMonth() + 1).padStart(2, \"0\"); //January is 0!\n        let yyyy = today.getFullYear();\n    \n        today = mm + \"/\" + dd + \"/\" + yyyy;\n        return today;\n      };\n      const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (!category) {\n          setCategoryErrMsg(\"Please select a category\");\n        }\n        if (authorname && title && description && imageUrl && category && likes && comments) {\n          const currentDate = getDate();\n            const updatedBlogData = { ...formValue, date: currentDate };\n            const response = await axios.post(\n              \"http://localhost:5000/blogs\",\n              updatedBlogData\n            );\n            if (response.status === 201) {\n              toast.success(\"Blog Created Successfully\");\n            } else {\n              toast.error(\"Something went wrong\");\n            }\n           \n    \n          setFormValue({ authorname: \"\", title: \"\", description: \"\", likes: \"\", comments: \"\", category: \"\", imageUrl: \"\" });\n          navigate(\"/\");\n        }\n      };\n    const onInputChange = (e) => {\n        let { name, value } = e.target;\n        setFormValue({ ...formValue, [name]: value });\n    };\n    const onUploadImage = (file) => {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        formData.append(\"upload_preset\", \"xqvmv0yi\");\n        axios\n        .post(\"http://api.cloudinary.com/v1_1/ddy1g5aim/image/upload\", formData)\n        .then((resp) => {\n          toast.info(\"Image Uploaded Successfully\");\n          setFormValue({ ...formValue, imageUrl: resp.data.url });\n        })\n        .catch((err) => {\n          toast.error(\"Something went wrong\");\n        });\n    };\n    const onCategoryChange = (e) => {\n        setCategoryErrMsg(null);\n        setFormValue({ ...formValue, category: e.target.value });\n      };\n\n  return (\n    // <div style={{ marginTop: \"100px\" }}>\n    //   {/* <MDBContainer>\n    //     <MDBTypography note noteColor=\"primary\">\n    //       It is blogging website where you will find blog post related to\n    //       different category like Travel, Food, Sports Fitness, Tech and Fashion\n    //     </MDBTypography>\n    //   </MDBContainer> */}\n    //   <h2>Add Edit</h2>\n    // </div>\n    <MDBValidation className= \"row g-3\" style = {{marginTop: '100px'}} noValidate onSubmit={handleSubmit}>\n        <p className='fs-2 fw-bold'>Add Blog</p>\n        <div\n        style={{\n          margin: \"auto\",\n          padding: \"15px\",\n          maxWidth: \"400px\",\n          alignContent: \"center\",\n        }}\n      >\n                  <MDBInput\n          value={authorname || \"\"}\n          name=\"authorname\"\n          type=\"text\"\n          onChange={onInputChange}\n          required\n          label=\"Author Name\"\n          validation=\"Please provide an Author Name\"\n          invalid\n        />\n        <br/>\n           <MDBInput\n          value={title || \"\"}\n          name=\"title\"\n          type=\"text\"\n          onChange={onInputChange}\n          required\n          label=\"Title\"\n          validation=\"Please provide a title\"\n          invalid\n        />\n        <br/>\n          <MDBInput\n          value={likes || \"\"}\n          name=\"likes\"\n          type=\"text\"\n          onChange={onInputChange}\n          required\n          label=\"Number of Likes\"\n          validation=\"Please Enter the number of likes\"\n          invalid\n        />\n        <br/>\n         <MDBInput\n          value={comments || \"\"}\n          name=\"comments\"\n          type=\"text\"\n          onChange={onInputChange}\n          required\n          label=\"Comments\"\n          validation=\"Please Enter the number of comments recieved\"\n          invalid\n        />\n         <br />\n         <MDBInput\n          value={description || \"\"}\n          name=\"description\"\n          type=\"text\"\n          onChange={onInputChange}\n          required\n          label=\"Description\"\n          validation=\"Please provide a description\"\n          textarea\n          rows={4}\n          invalid\n        />\n        <br />\n        <MDBInput\n              type=\"file\"\n              onChange={(e) => onUploadImage(e.target.files[0])}\n              required\n              validation=\"Please provide a title\"\n              invalid\n            />\n             <br />\n             <select\n          className=\"categoryDropdown\"\n          onChange={onCategoryChange}\n          value={category}\n        >\n          <option>Please select category</option>\n          {options.map((option, index) => (\n            <option value={option || \"\"} key={index}>\n              {option}\n            </option>\n          ))}\n        </select>\n        {categoryErrMsg && (\n          <div className=\"categoryErrorMsg\">{categoryErrMsg}</div>\n        )}\n        <br />\n        <br />\n        <MDBBtn type=\"submit\" style={{ marginRight: \"10px\" }}>\n          {/* {editMode ? \"Update\" : \"Add\"} */}\n          Add\n        </MDBBtn>\n        <MDBBtn\n          color=\"danger\"\n          style={{ marginRight: \"10px\" }}\n          onClick={() => navigate(\"/\")}\n        >\n          Go Back\n        </MDBBtn>\n      </div>\n        </MDBValidation>\n  );\n};\n\nexport default AddEditBlog;"]},"metadata":{},"sourceType":"module"}